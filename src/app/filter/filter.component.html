<ng-container *transloco="let t">
  @if (filter) {
    <form>
      <div class="grid auto-cols-auto grid-flow-col gap-3">
        <fieldset>
          <app-select-category
            [(categoryId)]="filter.categoryId"
            (categoryIdChange)="submit()"
            [categories]="categories"
            [defaultOptionLabel]="t('all')"></app-select-category>
        </fieldset>
        <fieldset>
          <legend
            class="mb-2 block text-sm font-medium leading-6 text-gray-900">
            {{ t('date') }}
          </legend>
          <div class="flex gap-2">
            <div class="flex-grow">
              <div class="grid">
                <ng-icon
                  name="heroChevronUpDown"
                  class="pointer-events-none relative right-2 z-10 col-start-1 row-start-1 self-center justify-self-end"></ng-icon>
                <select
                  id="month"
                  class="col-start-1 row-start-1 w-full min-w-24 appearance-none rounded-md border border-gray-300 bg-white py-2 pe-7 ps-2 text-sm leading-6 shadow-sm focus:border-indigo-600 focus:ring-indigo-500"
                  name="month"
                  [(ngModel)]="filter.month"
                  (ngModelChange)="submit()"
                  [attr.aria-label]="t('month')"
                  required>
                  @for (monthName of monthNames; track $index) {
                    <option [ngValue]="$index">{{ monthName }}</option>
                  }
                </select>
              </div>
            </div>
            <div>
              <div class="grid">
                <ng-icon
                  name="heroChevronUpDown"
                  class="pointer-events-none relative right-2 z-10 col-start-1 row-start-1 self-center justify-self-end"></ng-icon>
                <select
                  id="year"
                  class="col-start-1 row-start-1 w-full min-w-20 appearance-none rounded-md border border-gray-300 bg-white py-2 pe-7 ps-2 text-sm leading-6 shadow-sm focus:border-indigo-600 focus:ring-indigo-500"
                  name="year"
                  [(ngModel)]="filter.year"
                  (ngModelChange)="submit()"
                  [attr.aria-label]="t('year')"
                  required>
                  @for (year of years; track $index) {
                    <option [ngValue]="year">{{ year }}</option>
                  }
                </select>
              </div>
            </div>
          </div>
        </fieldset>
      </div>
    </form>
  }
</ng-container>
